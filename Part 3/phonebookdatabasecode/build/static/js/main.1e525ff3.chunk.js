(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports=n(39)},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(13),c=n.n(u),o=n(14),l=n(2),s=function(e){return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:e.newFilter,onChange:e.filterUpdater}))},i=function(e){return r.a.createElement("form",{onSubmit:e.inputHandler},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.newName,onChange:e.nameUpdater})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:e.newNumber,onChange:e.numberUpdater})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},m=n(3),f=n.n(m),d="/api/persons",b=function(){return f.a.get(d).then(function(e){return e.data})},p=function(e){return f.a.post(d,e).then(function(e){return e.data})},h=function(e,t,n){var a=f.a.delete("".concat(d,"/").concat(e));return t(n.filter(function(t){return t.id!==e})),a.then(function(e){return e.data})},w=function(e){return f.a.put("".concat(d,"/").concat(e.id),e).then(function(e){return e.data})},E=function(e){return e.persons.filter(function(t){return t.name.startsWith(e.newFilter)}).map(function(t){return r.a.createElement("li",{key:t.id},t.name," ",t.number,r.a.createElement("button",{onClick:function(){window.confirm("Do you really want to delete ".concat(t.name,"?"))&&(h(t.id,e.setPersons,e.persons),e.setMessage({class:"success",text:"".concat(t.name," deleted successfully!")}),setTimeout(function(){e.setMessage(null)},5e3))}},"Delete"))})},v=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:t.class},t.text)},g=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],u=t[1],c=Object(a.useState)(""),m=Object(l.a)(c,2),f=m[0],d=m[1],h=Object(a.useState)(""),g=Object(l.a)(h,2),j=g[0],O=g[1],y=Object(a.useState)(""),x=Object(l.a)(y,2),N=x[0],k=x[1],S=Object(a.useState)(null),T=Object(l.a)(S,2),U=T[0],C=T[1];Object(a.useEffect)(function(){b().then(function(e){return u(e)})},[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(v,{message:U}),r.a.createElement(s,{filterUpdater:function(e){k(e.target.value)},newFilter:N}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(i,{newName:f,newNumber:j,nameUpdater:function(e){d(e.target.value)},numberUpdater:function(e){O(e.target.value)},inputHandler:function(e){e.preventDefault();var t=n.find(function(e){return e.name===f});if(void 0===t){if(""===f||""===j)return C({class:"error",text:"Name nor number can be empty"}),void setTimeout(function(){C(null)},5e3);p({name:f,number:j}).then(function(e){u(n.concat(e)),C({class:"success",text:"".concat(f," registered successfully!")}),setTimeout(function(){C(null)},5e3)}).catch(function(e){C({class:"error",text:e.response.data.error}),setTimeout(function(){C(null)},5e3)}),d(""),O("")}else window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?"))&&(w(Object(o.a)({},t,{number:j})).then(function(e){u(n.map(function(t){return t.name!==f?t:e}))}).catch(function(e){C({class:"error",text:"".concat(f," has been deleted from the server by another user")}),setTimeout(function(){C(null)},5e3),u(n.filter(function(e){return e.name!==f}))}),C({class:"success",text:f+"'s phone number edited successfully!"}),setTimeout(function(){C(null)},5e3))}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(E,{newFilter:N,persons:n,setPersons:u,setMessage:C}))};n(38);c.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.1e525ff3.chunk.js.map