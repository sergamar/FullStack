{"version":3,"sources":["services/login.js","services/blogs.js","components/Blog.js","components/CustomInput.js","components/LoginForm.js","components/BlogForm.js","components/Toggable.js","hooks/index.js","App.js","index.js"],"names":["services_login","login","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","credentials","response","wrap","_context","prev","next","axios","post","sent","abrupt","data","stop","_x","apply","this","arguments","services_blogs","getAll","get","then","uploadBlog","title","author","url","token","body","config","headers","Authorization","updateLikes","blog","blogs","setBlogs","likes","putUrl","baseUrl","id","put","map","item","deleteBlog","fullUrl","window","confirm","delete","filter","Blog","selectedTitle","setSelectedTitle","user","blogStyle","paddingTop","paddingLeft","border","borderWidth","marginBottom","username","react_default","createElement","style","class","onClick","CustomInput","type","value","onChange","reset","loginForm","handleLogin","password","onSubmit","components_CustomInput","blogForm","addBlog","newTitle","newAuthor","newUrl","Togglable","React","forwardRef","props","ref","_useState","useState","_useState2","slicedToArray","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","useImperativeHandle","buttonLabel","children","useField","setValue","event","target","App","_useState3","_useState4","errorMessage","setErrorMessage","_useState5","_useState6","successMessage","setSuccessMessage","_useState7","_useState8","setUser","_useState9","_useState10","blogFormRef","createRef","useEffect","blogServices","initialBlogs","loggedUserJSON","localStorage","getItem","loadedUser","JSON","parse","_user","preventDefault","loginService","setItem","stringify","t0","setTimeout","nothing","className","removeItem","LoginForm","Toggable","BlogForm","concat","current","exception","sort","blog1","blog2","components_Blog","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.22a2380c.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\nconst login = async credentials => {\r\n  const response = await axios.post(baseUrl, credentials)\r\n  return response.data\r\n}\r\n\r\nexport default { login }","import axios from 'axios'\nconst baseUrl = '/api/blogs'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => {\n    return response.data\n  })\n}\n\nconst uploadBlog = (title, author, url, token) => {\n  const body = {\n    title: title,\n    author: author,\n    url: url\n  }\n  const config = {\n    headers: {\n      'Authorization': 'Bearer ' + token\n    }\n  }\n  const request = axios.post(baseUrl, body, config)\n  return request.then(response => {\n    return response.data\n  })\n}\n\nconst updateLikes = (blog, blogs, setBlogs) => {\n  const body = {\n    likes: blog.likes+1,\n  }\n  const putUrl =  baseUrl + '/' + blog.id\n  const request = axios.put(putUrl, body)\n  return request.then(response => {\n    setBlogs(blogs.map((item) => {\n      if(item.id === blog.id){\n        item.likes = item.likes+1\n        return item\n      }\n      else return item\n    }\n    ))\n    return response.data\n  })\n}\n\nconst deleteBlog = (blog, blogs, setBlogs, token) => {\n  const fullUrl = baseUrl+'/'+blog.id\n  const config = {\n    headers: {\n      'Authorization':'Bearer ' + token\n    }\n  }\n  if(!window.confirm(\"Remove blog \" + blog.title + \" by \" + blog.author + \"?\") ){\n    return\n  }\n  const request = axios.delete(fullUrl, config)\n  return request.then(response => {\n    setBlogs(blogs.filter((item) => {\n      return item.id !== blog.id\n    }))\n    return response.data\n  })\n}\n\nexport default { getAll, uploadBlog, updateLikes, deleteBlog }","import React from 'react'\nconst Blog = ({ blog, selectedTitle, setSelectedTitle, updateLikes, blogs, setBlogs, deleteBlog, user }) => {\n  const blogStyle = {\n    paddingTop: 10,\n    paddingLeft: 2,\n    border: 'solid',\n    borderWidth: 1,\n    marginBottom: 5\n  }\n\n\n  if (blog.title === selectedTitle){\n    if (user === null || blog.user.username !== user.username){\n      return (\n    <div style={blogStyle} class='blog'>\n      <div onClick={() => setSelectedTitle(null)}>\n        {blog.title} {blog.author}<br/>{blog.url}<br/> {blog.likes} \n        <button onClick={() => updateLikes(blog, blogs, setBlogs)}> like </button> \n        <br/>Added by {blog.user.username}\n      </div>\n    </div> )\n    }\n    else{\n      return(\n        <div style={blogStyle} class='blog'>\n      <div onClick={() => setSelectedTitle(null)}>\n        {blog.title} {blog.author}<br/>{blog.url}<br/> {blog.likes} \n        <button onClick={() => updateLikes(blog, blogs, setBlogs)}> like </button> \n        <br/>Added by {blog.user.username}\n        <button onClick={() => deleteBlog(blog, blogs, setBlogs, user.token)}> Delete Blog </button>\n      </div>\n    </div> \n      )\n    }\n  }\n  else{\n  return (<div style={blogStyle} class='blog'>\n    <div onClick={() => setSelectedTitle(blog.title)}>\n      {blog.title} <br/>{blog.author}\n    </div>\n   </div>)\n  }\n}\nexport default Blog","import React from 'react'\r\n\r\nconst CustomInput = ({type, value, onChange, reset}) => {\r\n    return(<div><input type={type} value={value} onChange={onChange} />\r\n        <button type=\"button\" onClick={reset}>reset</button>\r\n        </div>)\r\n}\r\n\r\nexport default CustomInput","import React from \"react\"\r\nimport CustomInput from \"./CustomInput\"\r\n\r\nconst loginForm = ({handleLogin, username, password}) => (\r\n  <div>\r\n    <form onSubmit={handleLogin}>\r\n      <div>\r\n        username\r\n          <CustomInput\r\n          {...username}\r\n        />\r\n      </div>\r\n      <div>\r\n        password\r\n          <CustomInput\r\n          {...password}\r\n        />\r\n      </div>\r\n      <button type=\"submit\">login</button>\r\n    </form> \r\n    </div>    \r\n  )\r\n\r\n  export default loginForm","import PropTypes from 'prop-types'\r\nimport React from \"react\"\r\nimport CustomInput from \"./CustomInput\"\r\n\r\nconst blogForm = ({addBlog, newTitle, newAuthor, newUrl}) => (\r\n    <form onSubmit={addBlog}>\r\n      <div>\r\n        title:\r\n          <CustomInput {...newTitle}\r\n        />\r\n      </div>\r\n      <div>\r\n        author:\r\n          <CustomInput {...newAuthor}\r\n        />\r\n      </div>\r\n      <div>\r\n        url:\r\n          <CustomInput {...newUrl}\r\n        />\r\n      </div>\r\n      <button type=\"submit\">save</button>\r\n    </form>  \r\n  )\r\n\r\n  blogForm.propTypes = {\r\n    addBlog: PropTypes.func.isRequired,\r\n    newTitle: PropTypes.string.isRequired,\r\n    newAuthor: PropTypes.string.isRequired,\r\n    newUrl: PropTypes.string.isRequired\r\n  }\r\n\r\nexport default blogForm","import React, { useState, useImperativeHandle } from 'react'\r\nconst Togglable = React.forwardRef((props, ref) => {  const [visible, setVisible] = useState(false)\r\n\r\n  const hideWhenVisible = { display: visible ? 'none' : '' }\r\n  const showWhenVisible = { display: visible ? '' : 'none' }\r\n\r\n  const toggleVisibility = () => {\r\n    setVisible(!visible)\r\n  }\r\n\r\n  useImperativeHandle(ref, () => {    return {      toggleVisibility    }  })\r\n  return (\r\n    <div>\r\n      <div style={hideWhenVisible}>\r\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\r\n      </div>\r\n      <div style={showWhenVisible}>\r\n        {props.children}\r\n        <button onClick={toggleVisibility}>cancel</button>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\nexport default Togglable","import { useState } from 'react'\r\n\r\nexport const useField = (type) => {\r\n  const [value, setValue] = useState('')\r\n\r\n  const onChange = (event) => {\r\n    setValue(event.target.value)\r\n  }\r\n\r\n  const reset = (event) => {\r\n    setValue('')\r\n  }\r\n\r\n  return {\r\n    type,\r\n    value,\r\n    onChange,\r\n    reset\r\n  }\r\n}\r\n","import React, {useState, useEffect} from 'react'\nimport loginService from './services/login'\nimport blogServices from './services/blogs'\nimport Blog from './components/Blog'\nimport LoginForm from './components/LoginForm'\nimport BlogForm from './components/BlogForm'\nimport Toggable from './components/Toggable'\nimport {useField} from './hooks/index'\nimport './index.css'\n\nconst App = () => {\n  const [blogs, setBlogs] = useState([]) \n  const newTitle = useField('text')\n  const newAuthor = useField('text')\n  const newUrl = useField('text')\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [successMessage, setSuccessMessage] = useState(null)\n  const username = useField('text')\n  const password = useField('password')\n  const [user, setUser] = useState(null)\n  const [selectedTitle, setSelectedTitle] = useState(null)\n  const blogFormRef = React.createRef()\n\n  useEffect(() => {\n    blogServices\n      .getAll().then(initialBlogs => {\n        setBlogs(initialBlogs)\n      })\n  }, [])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\n    if (loggedUserJSON){\n      const loadedUser = JSON.parse(loggedUserJSON)\n      setUser(loadedUser)\n    }\n  },[])\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n    try {\n      const user = await loginService.login({\n      username: username.value, password: password.value\n      })\n\n      setUser(user)\n      window.localStorage.setItem(\n        'loggedBlogappUser', JSON.stringify(user)\n      )\n      username.reset()\n      password.reset()\n    } catch (exception) {\n      setErrorMessage('Wrong credentials')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n  }\n\n  const addBlog = (event) => {\n    event.preventDefault()\n    try{\n      blogServices.uploadBlog(newTitle.value, newAuthor.value, newUrl.value, user.token)\n      setSuccessMessage(newTitle + ' has been added successfully!!')\n      setBlogs(blogs.concat({\n        title: newTitle.value,\n        author: newAuthor.value,\n        url: newUrl.value,\n        likes: 0,\n        user: user\n      }))\n      blogFormRef.current.toggleVisibility()\n      setTimeout(() => {\n        setSuccessMessage(null)\n      }, 5000)\n    } catch (exception) {\n      setErrorMessage(exception)\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n  }\n\n  const logged = () => (\n    <div>\n    {user.username} logged in.\n    <button onClick={() => {\n      setUser(null)\n      window.localStorage.removeItem('loggedBlogappUser')\n      }}>\n      logout\n    </button>\n    </div>\n  )\n\n  const nothing = () => {\n    return\n  }\n\n  const errorDisplay = () => (\n    <div className=\"error\">\n      {errorMessage}\n    </div>\n  )\n\n  const successDisplay = () => (\n    <div className=\"success\">\n      {successMessage}\n    </div>\n  )\n\n  return (\n    <div>\n      <h1>Blogs</h1>\n\n      {errorMessage === null ? nothing() : errorDisplay()}\n      {successMessage === null ? nothing() : successDisplay()}\n\n      {user !== null ? logged() : nothing()}\n\n      <h2>Login</h2>\n\n      {user === null ? <LoginForm handleLogin={handleLogin} username={username} password={password}/>: \n    <Toggable buttonLabel=\"New Blog\" ref={blogFormRef}>\n      <BlogForm addBlog={addBlog} newTitle={newTitle} newAuthor={newAuthor} newUrl={newUrl}/>\n    </Toggable>}\n      \n        { user !== null ? blogs.sort((blog1, blog2) => {\n          return blog2.likes-blog1.likes\n        }).map( blog => (\n          <Blog blog={blog} selectedTitle={selectedTitle} setSelectedTitle={setSelectedTitle} updateLikes={blogServices.updateLikes} blogs={blogs} setBlogs={setBlogs}\n          deleteBlog={blogServices.deleteBlog} user={user}/>\n        )): nothing()}\n    </div>\n  )\n}\n\nexport default App\n","\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}