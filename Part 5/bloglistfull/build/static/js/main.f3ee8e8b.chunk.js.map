{"version":3,"sources":["services/login.js","services/blogs.js","components/Blog.js","components/LoginForm.js","components/BlogForm.js","components/Toggable.js","App.js","index.js"],"names":["services_login","login","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","credentials","response","wrap","_context","prev","next","axios","post","sent","abrupt","data","stop","_x","apply","this","arguments","services_blogs","getAll","get","then","uploadBlog","title","author","url","token","body","config","headers","Authorization","updateLikes","blog","blogs","setBlogs","likes","putUrl","baseUrl","id","put","map","item","deleteBlog","fullUrl","window","confirm","delete","filter","Blog","selectedTitle","setSelectedTitle","user","blogStyle","paddingTop","paddingLeft","border","borderWidth","marginBottom","username","react_default","createElement","style","onClick","loginForm","handleLogin","setUsername","password","setPassword","onSubmit","type","value","name","onChange","_ref2","target","_ref3","blogForm","addBlog","newTitle","setNewTitle","newAuthor","setNewAuthor","newUrl","setNewUrl","_ref4","Togglable","React","forwardRef","props","ref","_useState","useState","_useState2","slicedToArray","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","useImperativeHandle","buttonLabel","children","App","_useState3","_useState4","_useState5","_useState6","_useState7","_useState8","_useState9","_useState10","errorMessage","setErrorMessage","_useState11","_useState12","successMessage","setSuccessMessage","_useState13","_useState14","_useState15","_useState16","_useState17","_useState18","setUser","_useState19","_useState20","blogFormRef","createRef","useEffect","blogServices","initialBlogs","event","_user","preventDefault","loginService","t0","setTimeout","nothing","className","LoginForm","Toggable","BlogForm","concat","current","exception","sort","blog1","blog2","components_Blog","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.f3ee8e8b.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\nconst login = async credentials => {\r\n  const response = await axios.post(baseUrl, credentials)\r\n  return response.data\r\n}\r\n\r\nexport default { login }","import axios from 'axios'\nconst baseUrl = '/api/blogs'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => {\n    return response.data\n  })\n}\n\nconst uploadBlog = (title, author, url, token) => {\n  const body = {\n    title: title,\n    author: author,\n    url: url\n  }\n  const config = {\n    headers: {\n      'Authorization': 'Bearer ' + token\n    }\n  }\n  const request = axios.post(baseUrl, body, config)\n  return request.then(response => {\n    return response.data\n  })\n}\n\nconst updateLikes = (blog, blogs, setBlogs) => {\n  const body = {\n    likes: blog.likes+1,\n  }\n  const putUrl =  baseUrl + '/' + blog.id\n  const request = axios.put(putUrl, body)\n  return request.then(response => {\n    setBlogs(blogs.map((item) => {\n      if(item.id === blog.id){\n        item.likes = item.likes+1\n        return item\n      }\n      else return item\n    }\n    ))\n    return response.data\n  })\n}\n\nconst deleteBlog = (blog, blogs, setBlogs, token) => {\n  const fullUrl = baseUrl+'/'+blog.id\n  const config = {\n    headers: {\n      'Authorization':'Bearer ' + token\n    }\n  }\n  if(!window.confirm(\"Remove blog \" + blog.title + \" by \" + blog.author + \"?\") ){\n    return\n  }\n  const request = axios.delete(fullUrl, config)\n  return request.then(response => {\n    setBlogs(blogs.filter((item) => {\n      return item.id !== blog.id\n    }))\n    return response.data\n  })\n}\n\nexport default { getAll, uploadBlog, updateLikes, deleteBlog }","import React from 'react'\nconst Blog = ({ blog, selectedTitle, setSelectedTitle, updateLikes, blogs, setBlogs, deleteBlog, user }) => {\n  const blogStyle = {\n    paddingTop: 10,\n    paddingLeft: 2,\n    border: 'solid',\n    borderWidth: 1,\n    marginBottom: 5\n  }\n\n\n  if (blog.title === selectedTitle){\n    if (user === null || blog.user.username !== user.username){\n      return (\n    <div style={blogStyle}>\n      <div onClick={() => setSelectedTitle(null)}>\n        {blog.title} {blog.author}<br/>{blog.url}<br/> {blog.likes} \n        <button onClick={() => updateLikes(blog, blogs, setBlogs)}> like </button> \n        <br/>Added by {blog.user.username}\n      </div>\n    </div> )\n    }\n    else{\n      return(\n        <div style={blogStyle}>\n      <div onClick={() => setSelectedTitle(null)}>\n        {blog.title} {blog.author}<br/>{blog.url}<br/> {blog.likes} \n        <button onClick={() => updateLikes(blog, blogs, setBlogs)}> like </button> \n        <br/>Added by {blog.user.username}\n        <button onClick={() => deleteBlog(blog, blogs, setBlogs, user.token)}> Delete Blog </button>\n      </div>\n    </div> \n      )\n    }\n  }\n  else{\n  return (<div style={blogStyle}>\n    <div onClick={() => setSelectedTitle(blog.title)}>\n      {blog.title} <br/>{blog.author}\n    </div>\n   </div>)\n  }\n}\nexport default Blog","import React from \"react\"\r\n\r\nconst loginForm = ({handleLogin, username, setUsername, password, setPassword}) => (\r\n    <form onSubmit={handleLogin}>\r\n      <div>\r\n        username\r\n          <input\r\n          type=\"text\"\r\n          value={username}\r\n          name=\"Username\"\r\n          onChange={({ target }) => setUsername(target.value)}\r\n        />\r\n      </div>\r\n      <div>\r\n        password\r\n          <input\r\n          type=\"password\"\r\n          value={password}\r\n          name=\"Password\"\r\n          onChange={({ target }) => setPassword(target.value)}\r\n        />\r\n      </div>\r\n      <button type=\"submit\">login</button>\r\n    </form>      \r\n  )\r\n\r\n  export default loginForm","import React from \"react\"\r\n\r\nconst blogForm = ({addBlog, newTitle, setNewTitle, newAuthor, setNewAuthor, newUrl, setNewUrl}) => (\r\n    <form onSubmit={addBlog}>\r\n      <div>\r\n        title:\r\n          <input\r\n          type=\"text\"\r\n          value={newTitle}\r\n          name=\"title:\"\r\n          onChange={({ target }) => setNewTitle(target.value)}\r\n        />\r\n      </div>\r\n      <div>\r\n        author:\r\n          <input\r\n          type=\"text\"\r\n          value={newAuthor}\r\n          name=\"Author\"\r\n          onChange={({ target }) => setNewAuthor(target.value)}\r\n        />\r\n      </div>\r\n      <div>\r\n        url:\r\n          <input\r\n          type=\"text\"\r\n          value={newUrl}\r\n          name=\"Url\"\r\n          onChange={({ target }) => setNewUrl(target.value)}\r\n        />\r\n      </div>\r\n      <button type=\"submit\">save</button>\r\n    </form>  \r\n  )\r\n\r\nexport default blogForm","import React, { useState, useImperativeHandle } from 'react'\r\nconst Togglable = React.forwardRef((props, ref) => {  const [visible, setVisible] = useState(false)\r\n\r\n  const hideWhenVisible = { display: visible ? 'none' : '' }\r\n  const showWhenVisible = { display: visible ? '' : 'none' }\r\n\r\n  const toggleVisibility = () => {\r\n    setVisible(!visible)\r\n  }\r\n\r\n  useImperativeHandle(ref, () => {    return {      toggleVisibility    }  })\r\n  return (\r\n    <div>\r\n      <div style={hideWhenVisible}>\r\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\r\n      </div>\r\n      <div style={showWhenVisible}>\r\n        {props.children}\r\n        <button onClick={toggleVisibility}>cancel</button>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\nexport default Togglable","import React, {useState, useEffect} from 'react'\nimport loginService from './services/login'\nimport blogServices from './services/blogs'\nimport Blog from './components/Blog'\nimport LoginForm from './components/LoginForm'\nimport BlogForm from './components/BlogForm'\nimport Toggable from './components/Toggable'\nimport './index.css'\n\nconst App = () => {\n  const [blogs, setBlogs] = useState([]) \n  const [newTitle, setNewTitle] = useState('')\n  const [newAuthor, setNewAuthor] = useState('')\n  const [newUrl, setNewUrl] = useState('')\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [successMessage, setSuccessMessage] = useState(null)\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [user, setUser] = useState(null)\n  const [selectedTitle, setSelectedTitle] = useState(null)\n  const blogFormRef = React.createRef()\n\n  useEffect(() => {\n    blogServices\n      .getAll().then(initialBlogs => {\n        setBlogs(initialBlogs)\n      })\n  }, [])\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n    try {\n      const user = await loginService.login({\n        username, password,\n      })\n\n      setUser(user)\n      setUsername('')\n      setPassword('')\n    } catch (exception) {\n      setErrorMessage('Wrong credentials')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n  }\n\n  const addBlog = (event) => {\n    event.preventDefault()\n    try{\n      blogServices.uploadBlog(newTitle, newAuthor, newUrl, user.token)\n      setSuccessMessage(newTitle + ' has been added successfully!!')\n      setBlogs(blogs.concat({\n        title: newTitle,\n        author: newAuthor,\n        url: newUrl,\n        likes: 0,\n        user: user\n      }))\n      blogFormRef.current.toggleVisibility()\n      setTimeout(() => {\n        setSuccessMessage(null)\n      }, 5000)\n    } catch (exception) {\n      setErrorMessage(exception)\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n  }\n\n  const logged = () => (\n    <div>\n    {user.username} logged in.\n    <button onClick={() => setUser(null)}>\n      logout\n    </button>\n    </div>\n  )\n\n  const nothing = () => {\n    return\n  }\n\n  const errorDisplay = () => (\n    <div className=\"error\">\n      {errorMessage}\n    </div>\n  )\n\n  const successDisplay = () => (\n    <div className=\"success\">\n      {successMessage}\n    </div>\n  )\n\n  return (\n    <div>\n      <h1>Blogs</h1>\n\n      {errorMessage === null ? nothing() : errorDisplay()}\n      {successMessage === null ? nothing() : successDisplay()}\n\n      {user !== null ? logged() : nothing()}\n\n      <h2>Login</h2>\n\n      {user === null ? <LoginForm handleLogin={handleLogin} username={username} setUsername={setUsername} password={password} setPassword={setPassword}/>: \n    <Toggable buttonLabel=\"New Blog\" ref={blogFormRef}>\n      <BlogForm addBlog={addBlog} newTitle={newTitle} setNewTitle={setNewTitle} newAuthor={newAuthor} setNewAuthor={setNewAuthor} newUrl={newUrl} setNewUrl={setNewUrl}/>\n    </Toggable>}\n      \n        {blogs.sort((blog1, blog2) => {\n          return blog2.likes-blog1.likes\n        }).map( blog => (\n          <Blog blog={blog} selectedTitle={selectedTitle} setSelectedTitle={setSelectedTitle} updateLikes={blogServices.updateLikes} blogs={blogs} setBlogs={setBlogs}\n          deleteBlog={blogServices.deleteBlog} user={user}/>\n        ))}\n    </div>\n  )\n}\n\nexport default App\n","\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}